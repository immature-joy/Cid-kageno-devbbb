<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana AI - AI Image Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        :root {
            --primary: #ffd700;
            --secondary: #ff6b35;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #28a745;
            --danger: #dc3545;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }

        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(26, 26, 46, 0.8);
            border-radius: var(--radius);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .logo-icon {
            font-size: 2.8rem;
            color: var(--primary);
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
        }

        h1 {
            font-size: 2.8rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .tagline {
            font-size: 1.2rem;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Generator Panel */
        .panel {
            background: rgba(26, 26, 46, 0.8);
            border-radius: var(--radius);
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow);
        }

        .panel h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel h2 i {
            color: var(--secondary);
        }

        /* Form Controls */
        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #ddd;
        }

        textarea, select, input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        textarea:focus, select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-value {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            color: var(--primary);
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 30px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: var(--dark);
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-full {
            width: 100%;
            margin-top: 10px;
        }

        /* Image Display */
        .image-display {
            position: relative;
            min-height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px dashed rgba(255, 255, 255, 0.1);
        }

        .image-display img {
            max-width: 100%;
            max-height: 500px;
            border-radius: 8px;
            display: none;
        }

        .placeholder {
            text-align: center;
            color: #777;
            padding: 40px;
        }

        .placeholder i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.1);
        }

        /* Gallery */
        .gallery {
            margin-top: 40px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            position: relative;
            border-radius: var(--radius);
            overflow: hidden;
            background: rgba(26, 26, 46, 0.8);
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .gallery-item .prompt {
            padding: 15px;
            font-size: 0.9rem;
            color: #ccc;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .gallery-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Image Controls */
        .image-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .image-controls .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--dark);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
            border-left: 4px solid var(--primary);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 8px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s;
        }

        /* Responsive Adjustments */
        @media (max-width: 576px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .panel {
                padding: 20px;
            }
            
            .gallery-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-robot logo-icon"></i>
                <h1>Nano Banana AI</h1>
            </div>
            <p class="tagline">Generate stunning AI images using the ai4chat.co API. Create up to 10 images at once!</p>
        </header>

        <div class="main-content">
            <!-- Generator Panel -->
            <div class="panel">
                <h2><i class="fas fa-magic"></i> Create Image</h2>
                
                <div class="form-group">
                    <label for="prompt"><i class="fas fa-keyboard"></i> Image Prompt</label>
                    <textarea id="prompt" placeholder="Describe the image you want to generate... Example: 'A cute anime girl with blue hair in a fantasy forest'">A cute banana with sunglasses surfing on a wave, digital art</textarea>
                </div>
                
                <div class="form-group">
                    <label for="quantity"><i class="fas fa-layer-group"></i> Number of Images (1-10)</label>
                    <div class="slider-container">
                        <input type="range" id="quantity" min="1" max="10" value="4">
                        <span class="slider-value" id="quantityValue">4</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="aspectRatio"><i class="fas fa-crop"></i> Aspect Ratio</label>
                    <select id="aspectRatio">
                        <option value="1:1">Square (1:1)</option>
                        <option value="16:9">Widescreen (16:9)</option>
                        <option value="9:16">Portrait (9:16)</option>
                        <option value="4:3">Standard (4:3)</option>
                        <option value="3:4">Vertical (3:4)</option>
                    </select>
                </div>
                
                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <button class="btn btn-full" id="generateBtn">
                    <i class="fas fa-bolt"></i> Generate Images
                </button>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Generating your images... This may take a moment.</p>
                </div>
            </div>

            <!-- Image Display Panel -->
            <div class="panel">
                <h2><i class="fas fa-image"></i> Generated Images</h2>
                
                <div class="image-display" id="imageDisplay">
                    <div class="placeholder" id="placeholder">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Your generated images will appear here</p>
                    </div>
                    <div id="generatedImages"></div>
                </div>
                
                <div class="image-controls" id="imageControls" style="display: none;">
                    <button class="btn" id="downloadAllBtn">
                        <i class="fas fa-download"></i> Download All
                    </button>
                    <button class="btn" id="clearBtn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>

        <!-- Gallery Section -->
        <div class="panel gallery">
            <div class="gallery-controls">
                <h2><i class="fas fa-photo-video"></i> Recent Creations</h2>
                <button class="btn" id="refreshGallery">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            
            <div class="gallery-grid" id="galleryGrid">
                <!-- Gallery items will be dynamically added here -->
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast"></div>
    </div>

    <footer>
        <p>Nano Banana AI Image Generator © 2023 | Powered by AI4Chat API</p>
        <div class="footer-links">
            <a href="https://www.ai4chat.co/api/image/generate" target="_blank"><i class="fas fa-code"></i> API Docs</a>
            <a href="#" id="helpBtn"><i class="fas fa-question-circle"></i> Help</a>
            <a href="#"><i class="fas fa-shield-alt"></i> Privacy</a>
            <a href="#" id="contactBtn"><i class="fas fa-envelope"></i> Contact</a>
        </div>
    </footer>

    <script>
        // DOM Elements
        const promptInput = document.getElementById('prompt');
        const quantitySlider = document.getElementById('quantity');
        const quantityValue = document.getElementById('quantityValue');
        const aspectRatioSelect = document.getElementById('aspectRatio');
        const generateBtn = document.getElementById('generateBtn');
        const loadingDiv = document.getElementById('loading');
        const imageDisplay = document.getElementById('imageDisplay');
        const placeholder = document.getElementById('placeholder');
        const generatedImages = document.getElementById('generatedImages');
        const imageControls = document.getElementById('imageControls');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const clearBtn = document.getElementById('clearBtn');
        const galleryGrid = document.getElementById('galleryGrid');
        const refreshGalleryBtn = document.getElementById('refreshGallery');
        const toast = document.getElementById('toast');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const helpBtn = document.getElementById('helpBtn');
        const contactBtn = document.getElementById('contactBtn');

        // State
        let currentImages = [];
        let galleryItems = [];
        let isGenerating = false;

        // API Configuration
        const API_ENDPOINT = 'https://www.ai4chat.co/api/image/generate';

        // Update quantity value display
        quantitySlider.addEventListener('input', () => {
            quantityValue.textContent = quantitySlider.value;
        });

        // Show toast notification
        function showToast(message, type = 'info') {
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle';
            
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                warning: '#ffc107',
                info: '#17a2b8'
            };
            
            toast.innerHTML = `<i class="fas ${icon}"></i> ${message}`;
            toast.style.borderLeftColor = colors[type] || colors.info;
            toast.className = 'toast show';
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Update progress bar
        function updateProgress(percentage) {
            progressBar.style.width = `${percentage}%`;
        }

        // Generate images using ai4chat.co API
        async function generateImages() {
            if (isGenerating) return;
            
            const prompt = promptInput.value.trim();
            const quantity = parseInt(quantitySlider.value);
            const aspectRatio = aspectRatioSelect.value;
            
            if (!prompt) {
                showToast('Please enter a prompt', 'error');
                return;
            }
            
            if (prompt.length < 3) {
                showToast('Prompt must be at least 3 characters', 'error');
                return;
            }
            
            // Show loading state
            isGenerating = true;
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
            loadingDiv.style.display = 'block';
            progressContainer.style.display = 'block';
            placeholder.style.display = 'none';
            generatedImages.innerHTML = '';
            imageControls.style.display = 'none';
            updateProgress(0);
            
            try {
                showToast(`Starting generation of ${quantity} images...`, 'info');
                
                // Clear previous images
                currentImages = [];
                generatedImages.innerHTML = '';
                
                // Create image grid
                const imageGrid = document.createElement('div');
                imageGrid.style.display = 'grid';
                imageGrid.style.gridTemplateColumns = 'repeat(2, 1fr)';
                imageGrid.style.gap = '15px';
                imageGrid.style.margin = '10px';
                imageGrid.id = 'imageGridContainer';
                
                let generatedCount = 0;
                let failedCount = 0;
                
                // Generate each image
                for (let i = 0; i < quantity; i++) {
                    try {
                        // Update progress
                        updateProgress(((i) / quantity) * 100);
                        
                        // Make API request to ai4chat.co
                        const apiUrl = new URL(API_ENDPOINT);
                        apiUrl.searchParams.append('prompt', prompt);
                        apiUrl.searchParams.append('aspect_ratio', aspectRatio);
                        
                        showToast(`Generating image ${i + 1} of ${quantity}...`, 'info');
                        
                        const response = await fetch(apiUrl.toString(), {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                            }
                        });
                        
                        if (!response.ok) {
                            throw new Error(`API responded with status ${response.status}`);
                        }
                        
                        const data = await response.json();
                        
                        if (!data.image_link) {
                            throw new Error('No image link in response');
                        }
                        
                        const imageUrl = data.image_link;
                        
                        // Create image container
                        const imageContainer = document.createElement('div');
                        imageContainer.style.position = 'relative';
                        imageContainer.style.borderRadius = '8px';
                        imageContainer.style.overflow = 'hidden';
                        imageContainer.style.background = 'rgba(0,0,0,0.2)';
                        
                        // Create image element
                        const img = document.createElement('img');
                        img.src = imageUrl;
                        img.alt = `Generated: ${prompt}`;
                        img.style.width = '100%';
                        img.style.height = '200px';
                        img.style.objectFit = 'cover';
                        img.style.display = 'block';
                        
                        // Create loading overlay
                        const loadingOverlay = document.createElement('div');
                        loadingOverlay.style.position = 'absolute';
                        loadingOverlay.style.top = '0';
                        loadingOverlay.style.left = '0';
                        loadingOverlay.style.right = '0';
                        loadingOverlay.style.bottom = '0';
                        loadingOverlay.style.background = 'rgba(0,0,0,0.7)';
                        loadingOverlay.style.display = 'flex';
                        loadingOverlay.style.alignItems = 'center';
                        loadingOverlay.style.justifyContent = 'center';
                        loadingOverlay.style.color = 'white';
                        loadingOverlay.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                        
                        imageContainer.appendChild(img);
                        imageContainer.appendChild(loadingOverlay);
                        imageGrid.appendChild(imageContainer);
                        
                        // Preload image
                        const preloadImage = new Image();
                        preloadImage.onload = () => {
                            loadingOverlay.style.display = 'none';
                            generatedCount++;
                            
                            if (generatedCount + failedCount === quantity) {
                                updateProgress(100);
                                showToast(`Successfully generated ${generatedCount} images${failedCount > 0 ? ` (${failedCount} failed)` : ''}`, 
                                          failedCount > 0 ? 'warning' : 'success');
                            }
                        };
                        
                        preloadImage.onerror = () => {
                            loadingOverlay.innerHTML = '<i class="fas fa-exclamation-circle"></i> Failed to load';
                            loadingOverlay.style.background = 'rgba(220, 53, 69, 0.8)';
                            failedCount++;
                        };
                        
                        preloadImage.src = imageUrl;
                        
                        // Store image data
                        currentImages.push({
                            url: imageUrl,
                            prompt: prompt,
                            aspectRatio: aspectRatio,
                            timestamp: Date.now()
                        });
                        
                        // Add small delay between requests to avoid rate limiting
                        if (i < quantity - 1) {
                            await new Promise(resolve => setTimeout(resolve, 500));
                        }
                        
                    } catch (error) {
                        console.error(`Error generating image ${i + 1}:`, error);
                        failedCount++;
                        
                        // Create error placeholder
                        const errorContainer = document.createElement('div');
                        errorContainer.style.position = 'relative';
                        errorContainer.style.borderRadius = '8px';
                        errorContainer.style.overflow = 'hidden';
                        errorContainer.style.background = 'rgba(220, 53, 69, 0.1)';
                        errorContainer.style.border = '2px dashed rgba(220, 53, 69, 0.3)';
                        errorContainer.style.display = 'flex';
                        errorContainer.style.alignItems = 'center';
                        errorContainer.style.justifyContent = 'center';
                        errorContainer.style.height = '200px';
                        errorContainer.innerHTML = `
                            <div style="text-align: center; padding: 20px;">
                                <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #dc3545; margin-bottom: 10px;"></i>
                                <p style="color: #dc3545;">Failed to generate</p>
                            </div>
                        `;
                        imageGrid.appendChild(errorContainer);
                        
                        showToast(`Image ${i + 1} failed to generate`, 'warning');
                    }
                }
                
                generatedImages.appendChild(imageGrid);
                placeholder.style.display = 'none';
                
                if (currentImages.length > 0) {
                    imageControls.style.display = 'flex';
                    
                    // Add download buttons to successful images
                    const imageContainers = imageGrid.querySelectorAll('div');
                    imageContainers.forEach((container, index) => {
                        if (currentImages[index]) {
                            const downloadBtn = document.createElement('button');
                            downloadBtn.innerHTML = '<i class="fas fa-download"></i>';
                            downloadBtn.style.position = 'absolute';
                            downloadBtn.style.top = '10px';
                            downloadBtn.style.right = '10px';
                            downloadBtn.style.background = 'rgba(0,0,0,0.7)';
                            downloadBtn.style.color = 'white';
                            downloadBtn.style.border = 'none';
                            downloadBtn.style.borderRadius = '50%';
                            downloadBtn.style.width = '36px';
                            downloadBtn.style.height = '36px';
                            downloadBtn.style.cursor = 'pointer';
                            downloadBtn.style.display = 'flex';
                            downloadBtn.style.alignItems = 'center';
                            downloadBtn.style.justifyContent = 'center';
                            downloadBtn.style.transition = 'all 0.3s';
                            downloadBtn.style.zIndex = '10';
                            
                            downloadBtn.onmouseover = () => {
                                downloadBtn.style.background = 'rgba(255,215,0,0.9)';
                                downloadBtn.style.transform = 'scale(1.1)';
                            };
                            
                            downloadBtn.onmouseout = () => {
                                downloadBtn.style.background = 'rgba(0,0,0,0.7)';
                                downloadBtn.style.transform = 'scale(1)';
                            };
                            
                            downloadBtn.onclick = () => downloadImage(currentImages[index].url, `nano-banana-ai-${index+1}.jpg`);
                            
                            container.appendChild(downloadBtn);
                        }
                    });
                    
                    // Add to gallery
                    if (currentImages[0]) {
                        addToGallery(prompt, currentImages[0].url);
                    }
                }
                
            } catch (error) {
                console.error('Error in generation process:', error);
                showToast('Failed to generate images. Please try again.', 'error');
                placeholder.style.display = 'block';
            } finally {
                // Reset button state
                isGenerating = false;
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-bolt"></i> Generate Images';
                loadingDiv.style.display = 'none';
                progressContainer.style.display = 'none';
            }
        }

        // Download image
        function downloadImage(url, filename) {
            showToast(`Downloading ${filename}...`, 'info');
            
            // Create a temporary link for download
            fetch(url)
                .then(response => response.blob())
                .then(blob => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = filename;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                    
                    showToast('Download started!', 'success');
                })
                .catch(error => {
                    console.error('Download error:', error);
                    showToast('Failed to download image', 'error');
                });
        }

        // Download all images
        function downloadAllImages() {
            if (currentImages.length === 0) {
                showToast('No images to download', 'error');
                return;
            }
            
            showToast(`Starting download of ${currentImages.length} images...`, 'info');
            
            // Download each image with delay to avoid browser blocking
            currentImages.forEach((image, index) => {
                setTimeout(() => {
                    downloadImage(image.url, `nano-banana-ai-batch-${index+1}.jpg`);
                }, index * 500);
            });
        }

        // Clear generated images
        function clearImages() {
            currentImages = [];
            generatedImages.innerHTML = '';
            placeholder.style.display = 'block';
            imageControls.style.display = 'none';
            showToast('Cleared all generated images', 'info');
        }

        // Add generated image to gallery
        function addToGallery(prompt, imageUrl) {
            const galleryItem = {
                id: Date.now(),
                prompt: prompt,
                imageUrl: imageUrl,
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString()
            };
            
            galleryItems.unshift(galleryItem);
            if (galleryItems.length > 12) galleryItems.pop();
            
            updateGalleryDisplay();
            
            // Save to localStorage
            localStorage.setItem('nanoBananaGallery', JSON.stringify(galleryItems));
        }

        // Update gallery display
        function updateGalleryDisplay() {
            galleryGrid.innerHTML = '';
            
            if (galleryItems.length === 0) {
                galleryGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #777;">
                        <i class="fas fa-images" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <p>No images in gallery yet. Generate some images to see them here!</p>
                    </div>
                `;
                return;
            }
            
            galleryItems.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.innerHTML = `
                    <img src="${item.imageUrl}" alt="${item.prompt}" loading="lazy">
                    <div class="prompt">${item.prompt}</div>
                    <div style="padding: 0 15px 10px; font-size: 0.8rem; color: #888;">
                        ${item.date} ${item.time}
                    </div>
                `;
                
                galleryItem.addEventListener('click', () => {
                    promptInput.value = item.prompt;
                    showToast('Prompt loaded from gallery', 'info');
                });
                
                galleryGrid.appendChild(galleryItem);
            });
        }

        // Load gallery from localStorage
        function loadGallery() {
            const savedGallery = localStorage.getItem('nanoBananaGallery');
            if (savedGallery) {
                try {
                    galleryItems = JSON.parse(savedGallery);
                    updateGalleryDisplay();
                } catch (error) {
                    console.error('Error loading gallery:', error);
                    galleryItems = [];
                }
            }
        }

        // Show help modal
        function showHelp() {
            const helpContent = `
                <div style="padding: 20px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">How to use Nano Banana AI</h3>
                    <div style="margin-bottom: 15px;">
                        <h4><i class="fas fa-keyboard"></i> Writing Prompts</h4>
                        <p>Be specific and descriptive. Include details about:</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Subject (what you want to see)</li>
                            <li>Style (photorealistic, anime, digital art, etc.)</li>
                            <li>Colors and lighting</li>
                            <li>Setting or background</li>
                            <li>Mood or atmosphere</li>
                        </ul>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <h4><i class="fas fa-cog"></i> Settings</h4>
                        <p><strong>Number of Images:</strong> Generate 1-10 images at once</p>
                        <p><strong>Aspect Ratio:</strong> Choose different dimensions for your images</p>
                    </div>
                    <div>
                        <h4><i class="fas fa-bolt"></i> Tips</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Longer prompts usually give better results</li>
                            <li>Use commas to separate different aspects</li>
                            <li>You can specify art styles like "in the style of Van Gogh"</li>
                            <li>Images are saved to your browser's local storage</li>
                        </ul>
                    </div>
                </div>
            `;
            
            showModal('Help Guide', helpContent);
        }

        // Show contact modal
        function showContact() {
            const contactContent = `
                <div style="padding: 20px;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Contact & Support</h3>
                    <div style="margin-bottom: 20px;">
                        <h4><i class="fas fa-info-circle"></i> About</h4>
                        <p>Nano Banana AI uses the ai4chat.co API for image generation.</p>
                        <p>This is a frontend interface for the AI image generation service.</p>
                    </div>
                    <div>
                        <h4><i class="fas fa-exclamation-triangle"></i> Issues</h4>
                        <p>If you encounter problems:</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Check your internet connection</li>
                            <li>Try a different prompt</li>
                            <li>Reduce the number of images</li>
                            <li>Clear browser cache if images don't load</li>
                        </ul>
                    </div>
                </div>
            `;
            
            showModal('Contact & Support', contactContent);
        }

        // Show modal
        function showModal(title, content) {
            // Remove existing modal if any
            const existingModal = document.getElementById('customModal');
            if (existingModal) existingModal.remove();
            
            const modal = document.createElement('div');
            modal.id = 'customModal';
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.right = '0';
            modal.style.bottom = '0';
            modal.style.background = 'rgba(0,0,0,0.8)';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            modal.style.zIndex = '10000';
            modal.style.padding = '20px';
            
            modal.innerHTML = `
                <div style="background: var(--dark); border-radius: var(--radius); max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto; border: 1px solid rgba(255,255,255,0.1);">
                    <div style="padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="color: var(--primary); margin: 0;">${title}</h2>
                        <button id="closeModal" style="background: none; border: none; color: #aaa; font-size: 1.5rem; cursor: pointer;">×</button>
                    </div>
                    ${content}
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal on button click
            document.getElementById('closeModal').addEventListener('click', () => {
                modal.remove();
            });
            
            // Close modal on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Event Listeners
        generateBtn.addEventListener('click', generateImages);
        downloadAllBtn.addEventListener('click', downloadAllImages);
        clearBtn.addEventListener('click', clearImages);
        refreshGalleryBtn.addEventListener('click', () => {
            loadGallery();
            showToast('Gallery refreshed', 'info');
        });
        helpBtn.addEventListener('click', showHelp);
        contactBtn.addEventListener('click', showContact);

        // Allow Enter key to generate (but not Shift+Enter)
        promptInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                generateImages();
            }
        });

        // Example prompts for inspiration
        const examplePrompts = [
            "A cute anime girl with blue hair in a fantasy forest, detailed, vibrant colors",
            "Futuristic city with flying cars and holograms, cyberpunk style, neon lights",
            "Medieval castle on a cliff during sunset, epic fantasy art, dramatic lighting",
            "Underwater scene with colorful coral reefs and tropical fish, photorealistic",
            "Steampunk airship in the clouds, detailed machinery, brass and copper",
            "Magical forest with glowing mushrooms and fairies, enchanting atmosphere",
            "Samurai riding a robotic horse through a bamboo forest, concept art",
            "Post-apocalyptic desert with ruins and a lone wanderer, cinematic",
            "Astronaut floating in space with Earth in background, realistic NASA photo",
            "Cute kitten wearing a wizard hat, holding a tiny wand, digital art"
        ];

        // Add example prompts to placeholder on click
        promptInput.addEventListener('click', () => {
            if (promptInput.value === '') {
                const randomPrompt = examplePrompts[Math.floor(Math.random() * examplePrompts.length)];
                promptInput.placeholder = `Try: "${randomPrompt}"`;
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadGallery();
            
            // Show welcome message
            setTimeout(() => {
                showToast('Welcome to Nano Banana AI! Start by typing a prompt.', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
